# backend/Dockerfile.lambda
FROM public.ecr.aws/lambda/python:3.12
WORKDIR ${LAMBDA_TASK_ROOT}

# 1) Install dependencies (requirements.txt is in backend/)
COPY backend/requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# 2) Copy the entire backend/ (code + JSON files) into /var/task
COPY backend/ ${LAMBDA_TASK_ROOT}/

# 3) Lambda entrypoint â€“ server.py must define: handler = Mangum(app)
CMD ["server.handler"]
